@using Extensions.Helpers
@model SDC.Web.Models.IssueModel

@{
    ViewBag.Title = Model.Title + " - Details";
}

<h2>@Model.Title</h2>

<div>
    <h4>Issue</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.ProjectName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProjectName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Title)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Title)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Status)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.AuthorName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.AuthorName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.PerformerName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.PerformerName)
        </dd>
        
        @if (Model.ParentIssueId != null)
        {
            <dt>
                @Html.DisplayNameFor(model => model.ParentIssueTitle)
            </dt>

            <dd>
                @Html.ActionLink(Model.ParentIssueTitle, "Details", new {id = Model.ParentIssueId})
            </dd>
        }

    </dl>
</div>

@if (Request.IsAuthenticated)
{
    <div class="row" style="margin: 10px 0">
        @Html.ActionButton("Add child issue", "Create", new { projectId = Model.ProjectId, parentIssueId = Model.Id }, new { style = "margin-right: 10px", @class = "col-sm-2 btn btn-default" })
        @Html.ActionButton("Edit", "Edit", new { id = Model.Id }, new { style = "margin-right: 10px", @class = "col-sm-2 btn btn-default" })
        @Html.ActionButton("Back to List", "Index", new { projectId = Model.ProjectId }, new { style = "margin-right: 10px", @class = "col-sm-2 btn btn-default" })
    </div>
}

@Html.Partial("IssuesTable", Model.ChildIssues)
